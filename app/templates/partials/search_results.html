{% if error %}
  <div class="callout callout--error">{{ error }}</div>
{% endif %}

{% if q and (results | length == 0) and (not error) %}
  <div class="callout">No channels found for <code>{{ q }}</code>.</div>
{% endif %}

{% if results and (results | length > 0) %}
  <div class="results">
    {% for r in results %}
      <div class="row">
        <div class="row__left">
          {% if r.thumbnail_url %}
            <img class="thumb" src="{{ r.thumbnail_url }}" alt="thumbnail" />
          {% endif %}
          <div>
            <div class="title">{{ r.title }}</div>
            <div class="muted small">
              {% if r.handle %}<span class="handle">{{ r.handle }}</span> Â· {% endif %}
              <code>{{ r.channel_id }}</code>
            </div>
            <div class="meta">
              {% if r.subscriber_count is not none %}
                <span class="chip">{{ "{:,}".format(r.subscriber_count) }} subscribers</span>
              {% else %}
                <span class="chip chip--muted">subscribers hidden</span>
              {% endif %}
              {% if r.video_count is not none %}
                <span class="chip">{{ "{:,}".format(r.video_count) }} videos</span>
              {% endif %}
            </div>
          </div>
        </div>
        <div class="row__right">
          <form
            hx-post="/track"
            hx-target="#tracked-list"
            hx-swap="innerHTML"
          >
            <input type="hidden" name="channel_id" value="{{ r.channel_id }}" />
            <button class="btn" type="submit">Add</button>
          </form>
        </div>
      </div>
    {% endfor %}
  </div>
{% endif %}
